### 网络应用的体系结构：

* CS
  * 服务器：一直运行，固定的IP地址和周知的端口号(约定)
    * 扩展性：服务器场
    * 扩展性差，可靠性差
  * 
* P2P
  * 难以进行管理，随着用户数量增加性能下降是平滑的
* CS和P2P的混合体
  * 例子：Napster；文件搜索：集中
    * 主机在中心服务器上注册其资源
    * 主机向中心服务器查询资源位置
    * 文件传输是P2P的，任意Peer节点之间可以进行传输
  * 即时通信；在线检测：集中
    * 当用户上线的时候，向中心服务器注册其IP地址
    * 用户与中心服务器联系，以找到其在线好友的位置
    * 用户之间聊天：P2P
* 进程通信
  * 不同主机之间，通过报文来通信
  * 客户端进程：发起通信的进程
  * 服务器进程：等待连接的进程，即便是在P2P中，在一个会话上也要作服务端和客户端的区分
* 对进程进行标识(SAP)
  * 三要素
    * IP
    * TCP or UDP
    * 端口号
* 传输层为应用层提供的服务
  * 层间接口必须要携带的信息
    * 要传输的报文SDU
    * 谁传的：自己的应用进程标示——IP+TCP(UDP)端口
    * 传给谁：对方的的进程标识——对方IP+TCP(UDP)端口
  * 每次都要携带上述信息，繁琐易错，所以使用Socket，每当建立连接的时候，都会得到一个OS返回的整数socket，代表了一个四元组，分别标识了自己和对方的IP和端口号，使用这种方式可以有效减少本地传过层间的信息，不用每次传输报文的时候都指定四元组内的信息
    * 需要补充理解的点是：操作系统是通过索引存储记录整数socket和四元组之间的关系的；socket只有本地意义
    * 在传输层再根据SOCKET去找对应的四元组进一步封装
* TCP Socket标识的是一个会话，而不仅仅是一个主机的标识
* UDP Socket不标识一个会话，只标识自己的IP和端口，但是在发送报文的时候就需要指定对方的IP地址和端口号

### 应用层协议

* 应该规定的内容：
  * 交换的报文类型
  * 各种报文类型的语法
  * 字段的语义
  * 进程何时、如何发送报文及对报文进行响应的规则
* 衡量传输层向应用层提供的服务的指标：
  * 数据丢失率
  * 延迟
  * 吞吐量
  * 安全性
* 传输层为应用层提供的服务
  * TCP
  * UDP
